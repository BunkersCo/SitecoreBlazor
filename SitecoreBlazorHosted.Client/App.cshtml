@using Foundation.BlazorExtensions.CustomBlazorRouter
@using Foundation.BlazorExtensions.Services
@using Foundation.BlazorExtensions.Extensions


@inject Microsoft.AspNetCore.Blazor.Services.IUriHelper _uriHelper;
@inject Foundation.BlazorExtensions.Services.SitecoreItemService _sitecoreItemService;
<!--
    Configuring this here is temporary. Later we'll move the app config
    into Program.cs, and it won't be necessary to specify AppAssembly.
-->
@*<Router AppAssembly=typeof(Program).Assembly />*@

@*Instead of using default router from Blazor we will have a customized version, which will allow us to add routes*@
<CustomRouter RouteValues="@RoutesData" />



@functions
{

  private RouterDataRoot RoutesData = null;

  protected override void OnInit()
  {

    RoutesData = _sitecoreItemService.ConfigRoutes();

    string relative = _uriHelper.ToBaseRelativePath(_uriHelper.GetBaseUri(), _uriHelper.GetAbsoluteUri());


    if (relative == "")
      _uriHelper.NavigateTo("en".WithBaseUrl_UglyHackForGithub(_uriHelper));


  }

}


